<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <meta name="viewport" content="width=300px, initial-scale=1.0">
    <link rel="stylesheet" href="../../static/css/base.css">
    <link rel="stylesheet" href="../../static/css/registration.css">

    <title>MashMusic</title>

    <!-- <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script> -->
</head>

<header>
    <nav class="navbar navbar-expand-lg">
        <a class="navbar-brand" href="/">MashMusic</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="line"></span>
            <span class="line"></span>
            <span class="line"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto ml-5">
                <li class="nav-item">
                    <a class="nav-link sas" href="/playlist">Playlists</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/profile">Profile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contacts</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/login">Login</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/registration">Sign-up</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<body>
    <form id="new-user-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" id="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                placeholder="Email">
        </div>
        <div class="form-group">
            <label for="exampleInputEmail1">Username</label>
            <input type="username" id="username" class="form-control" id="exampleInputEmail1"
                aria-describedby="emailHelp" placeholder="Username">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input type="password" id="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Repeat password</label>
            <input type="rep-password" class="form-control" id="exampleInputPassword1" placeholder="Repeat password">
        </div>
        <button type="submit" class="btn" id="btn" onclick="myFunction(); return false;">Sign-up</button>
    </form>
</body>

<footer>
    <div class="container pb-2">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 text-left mb-4 mt-4"><a href="#">Questions? Contact us.</a></div>

            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">FAQ</a> </div>
            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Investor Relations</a> </div>
            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Privacy</a> </div>

            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Speed Test</a> </div>
            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Help Center</a> </div>
            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Corporate Information</a> </div>

            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Contact Us</a> </div>
            <div class="col-md-4 col-sm-6 col-xs-12 text-left"><a href="#">Terms of Use</a> </div>
            <div class="col-md-4 col-sm-6 col-xs-12 text-left mb-3"><a href="#">Account</a> </div>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>




<!-- <script type="text/javascript">
    $(document).on('submit', '#new-user-form', function (e) {
        e.preventDefault();
        csrfmiddlewaretoken = $('input[name=csrfmiddlewaretoken]').val()
        info = {
            username: 'danylo567222222',
            email: 'danylo51202@gmail.com',
            password: '123',
            repeated_password: '123',
        }
        // if any errors, it can be here because я скопіпастив той код єбу як працює але то то шо треба(ajaxSetup).
        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type)) {
                    xhr.setRequestHeader("X-CSRFToken",
                        csrfmiddlewaretoken)
                }
            }
        });
        $.ajax({
            type: 'POST',
            url: '/sign-up/',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: JSON.stringify(info),
            //username: $('#username').val(),
            //email: $('#email').val(),
            //password: $('#password').val(),
            success: function () {
                alert("Create new user");
            }

        });
    });
</script> -->

<script type="text/javascript">
    function myFunction() {
        var csrftoken = '{{ csrf_token }}';
        //csrfmiddlewaretoken = $('input[name=csrfmiddlewaretoken]').val();
        data = JSON.stringify({
            username: document.getElementById("username").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value
        });

        var xmlHttp = new XMLHttpRequest();

        xmlHttp.onreadystatechange = function () {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                alert(xmlHttp.responseText);
            }
        }
        xmlHttp.open("POST", "http://127.0.0.1:8000/sign-up/");
        xmlHttp.setRequestHeader("X-CSRFToken", csrftoken);
        xmlHttp.send(data);
    }
</script>

</html>